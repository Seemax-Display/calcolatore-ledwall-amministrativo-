//Versione AMMINISTRATIVA 1.3.0 creata da DAVID FAILLA
<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calcolatore Ledwall Ufficiale Seemax 1.3.0 DARK PROFESSIONAL WOW+</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
/* BODY & CONTAINER */
body {
  margin: 0;
  padding: 0;
  font-family: 'Roboto', sans-serif;
  background: linear-gradient(160deg, #0a1b2a, #112f4a);
  color: #e0e0e0;
  overflow-x: hidden;
}
.container {
  max-width: 1000px;
  margin: 50px auto;
  background: rgba(20,30,50,0.9);
  padding: 60px 50px;
  border-radius: 25px;
  box-shadow: 0 20px 50px rgba(0,0,0,0.6);
}

/* HEADER */
h1 {
  text-align: center;
  color: #00c6ff;
  font-size: 44px;
  margin-bottom: 10px;
  text-shadow: 0 0 8px #00c6ff;
}
h3 {
  text-align: center;
  color: #b0cfff;
  font-weight: normal;
  font-size: 20px;
  margin-bottom: 50px;
}

/* INPUT */
.input-group { display: flex; justify-content: center; gap: 30px; flex-wrap: wrap; }
.input-group div { flex: 1 1 200px; }
.input-group label { display: block; font-weight: bold; color: #00aaff; margin-bottom: 5px; font-size: 16px; }
.input-group input {
  width: 100%;
  padding: 15px;
  font-size: 16px;
  border-radius: 12px;
  border: 1px solid #004b8d;
  background: rgba(0,75,141,0.1);
  color: #fff;
  transition: all 0.3s ease;
}
.input-group input:focus {
  border-color: #00c6ff;
  box-shadow: 0 0 20px rgba(0,198,255,0.5);
  outline: none;
}

/* CARDS */
.cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; margin-top: 50px; }
.card {
  position: relative;
  background: linear-gradient(145deg, #112f4a, #0a1b2a);
  border-radius: 20px;
  padding: 25px;
  box-shadow: 0 12px 35px rgba(0,0,0,0.5), 0 0 10px rgba(0,198,255,0.2) inset;
  text-align: center;
  transition: transform 0.5s ease, box-shadow 0.5s ease;
  cursor: pointer;
  overflow: hidden;
}
.card::before {
  content:"";
  position:absolute;
  top:0; left:0; right:0; bottom:0;
  background-image: radial-gradient(circle, rgba(255,255,255,0.03) 1px, transparent 1px);
  background-size: 12px 12px;
  border-radius:20px;
  pointer-events:none;
}
.card.green { border-left: 6px solid #00ff99; }
.card.red { border-left: 6px solid #ff5252; }
.card.yellow { border-left: 6px solid #ffc107; }
.card.best { border: 3px solid #00c6ff; box-shadow: 0 0 25px #00c6ff; }
.card:hover {
  transform: translateY(-12px) scale(1.05) rotateZ(1deg);
  box-shadow: 0 25px 55px rgba(0,0,0,0.6), 0 0 25px #00c6ff inset;
}
.card-icon { font-size: 50px; color: #00c6ff; margin-bottom: 15px; text-shadow: 0 0 10px #00c6ff; transition: transform 0.3s ease; }
.card:hover .card-icon { transform: scale(1.2) rotate(-5deg); }
.card h2 { color: #00c6ff; margin-bottom: 12px; font-size: 26px; text-shadow: 0 0 6px rgba(0,198,255,0.7); }
.card p { font-size: 16px; margin: 6px 0; }
/* PRICE, PRICECLIENT, CABINET - mantengono gradient blu */
.card .price, 
.card .priceClient, 
.card .cabinet {
    font-weight: bold;
    font-size: 20px;
    background: linear-gradient(90deg, #00ffcc, #00aaff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 2px 6px rgba(0,0,0,0.4);
}

/* MARGIN, MARGINCLIENT - verde chiaro */
.card .margin, 
.card .marginClient {
    font-weight: bold;
    font-size: 20px;
    color: #04fc00; /* verde chiaro */
    text-shadow: 0 2px 6px rgba(0,0,0,0.4);
    background: none;
    -webkit-background-clip: unset;
    -webkit-text-fill-color: unset;
}
.card.show .price, .card.show .cabinet { opacity: 1; transform: translateY(0); }
.card .bifacciale-label { color: #ff5252; font-weight: bold; margin-top: 10px; font-size: 18px; }

/* BUTTON */
.btn-request { margin-top: 18px; padding: 12px 22px; font-size: 16px; background: #004b8d; color: #fff; border: none; border-radius: 12px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(0,75,141,0.4); }
.btn-request:hover { background: #00c6ff; box-shadow: 0 0 25px #00c6ff, 0 6px 20px rgba(0,198,255,0.5); transform: translateY(-3px) scale(1.05); }

/* TOOLTIP */
.tooltip { position: relative; cursor: pointer; border-bottom: 1px dotted #00c6ff; }
.tooltip .tooltiptext { visibility: hidden; width: 240px; background-color: #00c6ff; color: #000; text-align: center; border-radius: 8px; padding: 10px; position: absolute; z-index: 1; bottom: 130%; left: 50%; margin-left: -120px; opacity: 0; transition: opacity 0.4s, transform 0.4s; transform: translateY(10px); font-size: 14px; }
.tooltip:hover .tooltiptext { visibility: visible; opacity: 1; transform: translateY(0); }

/* POPUP */
.card-popup { position: absolute; top: 10px; left: 10px; right: 10px; bottom: 10px; background: rgba(0,50,90,0.95); color: #fff; padding: 15px; border-radius: 15px; display: block; opacity: 0; transform: translateY(20px); z-index: 10; font-size: 14px; overflow-y: auto; transition: opacity 0.4s ease, transform 0.4s ease; }
.card.show-popup .card-popup { opacity: 1; transform: translateY(0); }

/* ALERT */
.alert { text-align:center; margin-top:30px; padding:20px; background:#221111; color:#ff5252; border-radius:15px; font-size:18px; box-shadow:0 10px 30px rgba(0,0,0,0.5); }
.alert a { color:#00c6ff; font-weight:bold; text-decoration:none; }
.alert a:hover { text-decoration:underline; }

/* LAYOUT */
#layoutContainer { margin-top:40px; text-align:center; display:flex; flex-direction:column; align-items:center; gap:15px; }
#layoutContainer h3 { color: #00c6ff; text-shadow: 0 0 10px #00c6ff; margin-bottom: 15px; }

/* SPLASH SCREEN */
#splash {
  position: fixed; top:0; left:0; width:100%; height:100%;
  background:#0a1b2a; display:flex; justify-content:center; align-items:center; flex-direction:column;
  z-index:9999; opacity:1; transition: opacity 0.8s ease;
}
#splash.hidden { opacity:0; pointer-events:none; }
#splash-logo { font-size:60px; color:#00c6ff; text-shadow:0 0 15px #00c6ff; transform: scale(0.8); animation:logoReveal 1s forwards; margin-bottom:20px; }
@keyframes logoReveal { 0% {opacity:0; transform:scale(0.5);} 100% {opacity:1; transform:scale(1);} }
#loading-bar { width:300px; height:8px; border-radius:4px; background: rgba(255,255,255,0.2); overflow:hidden; }
#loading-fill { width:0%; height:100%; background:#00c6ff; transition: width 0.3s ease; }

/* PARTICLE BACKGROUND */
#particle-bg { position: fixed; top:0; left:0; width:100%; height:100%; z-index:0; pointer-events:none; }

</style>
</head>
<body>

<canvas id="particle-bg"></canvas>
<div id="splash">
  <div id="splash-logo">SEEMAX</div>
  <div id="loading-bar"><div id="loading-fill"></div></div>
</div>

<div class="container">
  <h1>Calcolatore Ledwall Ufficiale Seemax</h1>
  <h3>Calcola e pianifica i tuoi preventivi in maniera dettagliata</h3>

  <div class="input-group">
    <div>
      <label for="base">Base (cm):</label>
      <input type="number" id="base" placeholder="Es. 200">
    </div>
    <div>
      <label for="altezza">Altezza (cm):</label>
      <input type="number" id="altezza" placeholder="Es. 200">
    </div>
    <div style="display:flex; align-items:center; gap:10px; margin-top:30px;">
      <input type="checkbox" id="bifacciale">
      <label for="bifacciale" style="font-weight:bold; color:#00aaff; cursor:pointer;">Bifacciale</label>
    </div>
  </div>

  <div id="alertContainer"></div>
  <div class="cards" id="cardsContainer"></div>
  <div id="layoutContainer"></div>
</div>

<script>
// PARTICLE BACKGROUND
const canvas = document.getElementById('particle-bg');
const ctx = canvas.getContext('2d');
let particles = [];
function resizeCanvas(){canvas.width=window.innerWidth; canvas.height=window.innerHeight;}
window.addEventListener('resize', resizeCanvas); resizeCanvas();
for(let i=0;i<80;i++){particles.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, r:Math.random()*2+1, dx:(Math.random()-0.5)/2, dy:(Math.random()-0.5)/2});}
function drawParticles(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fillStyle='rgba(0,198,255,0.3)';
    ctx.fill();
    p.x+=p.dx; p.y+=p.dy;
    if(p.x<0||p.x>canvas.width)p.dx*=-1;
    if(p.y<0||p.y>canvas.height)p.dy*=-1;
  });
  requestAnimationFrame(drawParticles);
}
drawParticles();

// SPLASH SCREEN SEMPRE VISIBILE
const splash = document.getElementById('splash');
const fill = document.getElementById('loading-fill');
let width = 0;
const interval = setInterval(() => {
  width += 2;
  fill.style.width = width + '%';
  if (width >= 100) {
    clearInterval(interval);
    setTimeout(() => {
      splash.classList.add('hidden');
    }, 300);
  }
}, 30);

const ledwalls = [
  { nome: "P1.9", cabX: 50, cabY: 100, prezzoAgente: 850, prezzoCliente: 950, prezzoCina: 560, info: "Ledwall Display P1.9 | Misura Cabinet: 0.50x1.00 | Qualit√† Elevata da Medie e Lunghe Distanze. Ottimo a Distanze Ravvicinate. | Utilizzabile SOLO per Installazioni Indoor. | COSTO DI ACQUISTO DALLA CINA: 560 Euro (Incluso del 30% dei costi di Spedizione).", icon: "üñ•Ô∏è" },
  { nome: "P2.5", cabX: 64, cabY: 64, prezzoAgente: 675, prezzoCliente: 765, prezzoCina: 450, info: "Ledwall Display P2.5 | Misura Cabinet: 0.64x0.64 | Qualit√† Eccellente da Medie e Lunghe Distanze. Buono a Distanze Ravvicinate. | Utilizzabile per Installazioni Indoor e Outdoor. | Adatto per Installazioni su Vetrina o Stile TOTEM. | COSTO DI ACQUISTO DALLA CINA: 450 Euro (Incluso del 30% dei costi di Spedizione).", icon: "üñ•Ô∏è" },
  { nome: "P3", cabX: 57, cabY: 57, prezzoAgente: 375, prezzoCliente: 425, prezzoCina: 250, info: "Ledwall Display P3 | Misura Cabinet: 0.57x0.57 | Qualit√† Eccellente da Medie e Lunghe Distanze. | Utilizzabile per Installazioni Indoor e Outdoor. | Adatto per Installazioni su Parete e a Bandiera. | COSTO DI ACQUISTO DALLA CINA: 250 Euro (Incluso del 30% dei costi di Spedizione).", icon: "üñ•Ô∏è" },
  { nome: "P3.91", cabX: 50, cabY: 100, prezzoAgente: 450, prezzoCliente: 550, prezzoCina: 280, info: "Ledwall Display P3.91 | Misura Cabinet: 0.50x1.00 | Qualit√† Ottima da Medie e Lunghe Distanze. | Utilizzabile per Installazioni Indoor e Outdoor. | Adatto per Installazioni su Parete e a Bandiera. | COSTO DI ACQUISTO DALLA CINA: 280 Euro (Incluso del 30% dei costi di Spedizione).", icon: "üñ•Ô∏è" },
  { nome: "P4", cabX: 96, cabY: 96, prezzoAgente: 800, prezzoCliente: 1000, prezzoCina: 580, info: "Ledwall Display P4 | Misura Cabinet: 0.96x0.96 | Qualit√† Buona da Medie e Lunghe Distanze. | Utilizzabile prettamente per Installazioni Outdoor. | Adatto per Installazioni su Parete e a Bandiera. | COSTO DI ACQUISTO DALLA CINA: 580 Euro (Incluso del 30% dei costi di Spedizione).", icon: "üñ•Ô∏è" }
];

const baseInput = document.getElementById('base');
const altezzaInput = document.getElementById('altezza');
const cardsContainer = document.getElementById('cardsContainer');
const alertContainer = document.getElementById('alertContainer');
const layoutContainer = document.getElementById('layoutContainer');
const whatsappNumber = "393294397445";
const bifaccialeInput = document.getElementById('bifacciale');

let currentPopup = null;

function animateValue(element, start, end, duration) {
  let startTimestamp = null;
  const step = (timestamp) => {
    if (!startTimestamp) startTimestamp = timestamp;
    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
    element.textContent = Math.floor(progress * (end - start) + start);
    if (progress < 1) window.requestAnimationFrame(step);
  };
  window.requestAnimationFrame(step);
}

function aggiornaLayout(models, rotatedMatchFlag) {
  layoutContainer.innerHTML = "";
  if (Array.isArray(models) && models.length > 1) {
      const p19 = models.find(m => m.nome === "P1.9");
      const p391 = models.find(m => m.nome === "P3.91");
      if (p19 && p391 && models.length === 2) {
          const title = "Layout suggerito per P1.9 / P3.91";
          layoutContainer.innerHTML += `<h3>${title}</h3>`;
          generaLayout(p19, rotatedMatchFlag);
      } else {
          models.forEach(model => {
              const title = `Layout suggerito per ${model.nome}`;
              layoutContainer.innerHTML += `<h3>${title}</h3>`;
              generaLayout(model, rotatedMatchFlag);
          });
      }
  } else {
      const model = Array.isArray(models) ? models[0] : models;
      const title = `Layout suggerito per ${model.nome}`;
      layoutContainer.innerHTML = `<h3>${title}</h3>`;
      generaLayout(model, rotatedMatchFlag);
  }
  if (rotatedMatchFlag) {
    const warning = document.createElement('div');
    warning.className = 'alert';
    warning.innerHTML = "‚ö†Ô∏è √à possibile ruotare alcuni cabinet rettangolari per ottenere questa misura, ma non √® consigliato.";
    layoutContainer.appendChild(warning);
  }
}

function generaLayout(model, rotatedMatchFlag) {
  const bifacciale = bifaccialeInput.checked;
  const layout = document.createElement('div');
  layout.style.display = 'grid';
  layout.style.gridGap = '3px';
  layout.style.justifyContent = 'center';
  const isRectangle = model.cabX === 50 && model.cabY === 100;
  const blockWidth = isRectangle && rotatedMatchFlag ? 2*30 : 30;
  const blockHeight = isRectangle && rotatedMatchFlag ? 30 : (isRectangle ? 2*30 : 30);
  let cols = rotatedMatchFlag && isRectangle ? Math.ceil(baseInput.value / model.cabY) : Math.ceil(baseInput.value / model.cabX);
  let rows = rotatedMatchFlag && isRectangle ? Math.ceil(altezzaInput.value / model.cabX) : Math.ceil(altezzaInput.value / model.cabY);
  layout.style.gridTemplateColumns = `repeat(${cols}, ${blockWidth}px)`;
  layout.style.gridTemplateRows = `repeat(${rows}, ${blockHeight}px)`;
  for (let r = 0; r < rows; r++) {
      for (let c = 0; c < cols; c++) {
          const cell = document.createElement('div');
          cell.style.width = `${blockWidth}px`;
          cell.style.height = `${blockHeight}px`;
          cell.style.borderRadius = '4px';
          cell.style.margin = '1px';
          cell.style.backgroundColor = bifacciale ? '#ff6f61' : '#00aaff';
          if(bifacciale) cell.style.border = '2px solid red';
          layout.appendChild(cell);
      }
  }
  layoutContainer.appendChild(layout);
}

function aggiornaCards() {
  const base = parseFloat(baseInput.value);
  const altezza = parseFloat(altezzaInput.value);
  const bifacciale = bifaccialeInput.checked;
  cardsContainer.innerHTML = '';
  alertContainer.innerHTML = '';
  layoutContainer.innerHTML = '';
  if(!base || !altezza) return;

  let results = ledwalls.map(model => {
    const isRectangle = model.cabX === 50 && model.cabY === 100;
    let perfectMatch = false;
    let rotatedMatch = false;

    if(isRectangle){
      perfectMatch = (base % model.cabX === 0 && altezza % model.cabY === 0);
      rotatedMatch = (!perfectMatch && (base % model.cabY === 0 && altezza % model.cabX === 0));
    } else {
      perfectMatch = (base % model.cabX === 0 && altezza % model.cabY === 0);
      rotatedMatch = false;
    }

    const colsNeeded = rotatedMatch ? Math.ceil(base / model.cabY) : Math.ceil(base / model.cabX);
    const rowsNeeded = rotatedMatch ? Math.ceil(altezza / model.cabX) : Math.ceil(altezza / model.cabY);

    // Calcolo totale cabinet e prezzi
    let totalCab = colsNeeded * rowsNeeded;
    let prezzoClienteTotale = totalCab * model.prezzoCliente;
    let prezzoAgenteTotale = totalCab * model.prezzoAgente;
    let margineCliente = prezzoClienteTotale - (totalCab * model.prezzoCina);
    let margineAgente = prezzoAgenteTotale - (totalCab * model.prezzoCina);

    if(bifacciale){
        totalCab *= 2;
        prezzoClienteTotale *= 2;
        prezzoAgenteTotale *= 2;
        margineCliente *= 2;
        margineAgente *= 2;
    }

    const nearestCols = Math.round(base / model.cabX);
    const nearestRows = Math.round(altezza / model.cabY);
    const nearestBase = nearestCols * model.cabX;
    const nearestAltezza = nearestRows * model.cabY;

    const diffX = Math.abs(base - (colsNeeded*(rotatedMatch?model.cabY:model.cabX)));
    const diffY = Math.abs(altezza - (rowsNeeded*(rotatedMatch?model.cabX:model.cabY)));
    const diff = diffX + diffY;
    const displayWidth = colsNeeded*(rotatedMatch?model.cabY:model.cabX);
    const displayHeight = rowsNeeded*(rotatedMatch?model.cabX:model.cabY);

    const prezzoTotale = prezzoClienteTotale; // usato per sort

    return {...model, colsNeeded, rowsNeeded, totalCab, prezzoClienteTotale, prezzoAgenteTotale, margineCliente, margineAgente, diff, perfectMatch, rotatedMatch, displayWidth, displayHeight, nearestBase, nearestAltezza, bifacciale, prezzoTotale};
  });

  const perfectMatches = results.filter(r => r.perfectMatch);
  const rotatedMatches = results.filter(r => r.rotatedMatch);
  const bestMatch = results.reduce((prev, curr) => curr.diff < prev.diff ? curr : prev);
  results.sort((a,b) => {
    if(a.perfectMatch && !b.perfectMatch) return -1;
    if(!a.perfectMatch && b.perfectMatch) return 1;
    return (a.diff + a.prezzoTotale*0.0001) - (b.diff + b.prezzoTotale*0.0001);
  });

  const bestPriceModel = results.reduce((prev, curr) => curr.prezzoTotale < prev.prezzoTotale ? curr : prev);

  results.forEach(model => {
    const wrapper = document.createElement('div');
    wrapper.style.display = 'flex';
    wrapper.style.flexDirection = 'column';
    wrapper.style.alignItems = 'center';

    const card = document.createElement('div');
    if(model.perfectMatch) card.className = 'card green';
    else if(model.rotatedMatch) card.className = 'card yellow';
    else card.className = 'card red';
    if(model.nome === bestPriceModel.nome) card.classList.add('best');

    const popup = document.createElement('div');
    popup.className = 'card-popup';
    popup.innerHTML = `<strong>${model.nome}</strong><br>${model.info}`;
    card.appendChild(popup);

    const whatsappLink = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(
      model.perfectMatch || model.rotatedMatch
      ? `Ti contatto dal calcolatore per il modello ${model.nome} con misura ${base} x ${altezza}${model.bifacciale ? " (Bifacciale)" : ""}. Voglio avere altre informazioni.`
      : `Ti contatto dal calcolatore per un preventivo personalizzato con modello ${model.nome} e misura ${base} x ${altezza}${model.bifacciale ? " (Bifacciale)" : ""}.`
    )}`;

    card.innerHTML += `
      <div class="card-icon">${model.icon}</div>
      <h2>${model.nome}</h2>
      <p class="tooltip">Dimensione Cabinet: ${model.cabX} x ${model.cabY} cm
        <span class="tooltiptext">${model.info}</span>
      </p>
      ${model.perfectMatch || model.rotatedMatch ? `
      <p class="cabinet">Numero Cabinet: <span id="cab${model.nome}">0</span></p>
      <p class="price">Prezzo Agente: <span id="priceAgent${model.nome}">0</span>‚Ç¨</p>
      <p class="priceClient">Prezzo Cliente: <span id="priceClient${model.nome}">0</span>‚Ç¨</p>
      <p class="margin">Margine su Agente: <span id="marginAgent${model.nome}">0</span>‚Ç¨</p>
      <p class="marginClient">Margine su Cliente: <span id="marginClient${model.nome}">0</span>‚Ç¨</p>
	  ${model.bifacciale ? `<p class="bifacciale-label">BIFACCIALE</p>` : ``}

      ` : `<p>Misura pi√π vicina: ${model.nearestBase} x ${model.nearestAltezza} cm</p>`}
    `;

    const btnRequest = document.createElement('button');
    btnRequest.className = 'btn-request';
    btnRequest.textContent = 'Richiedi Preventivo';
    btnRequest.onclick = function() { window.open(whatsappLink, '_blank'); };

    card.addEventListener('click', (e) => {
      if(e.target.classList && e.target.classList.contains('btn-request')) return;
      if (currentPopup && currentPopup !== card){
        currentPopup.classList.remove('show-popup');
      }
      card.classList.toggle('show-popup');
      currentPopup = card.classList.contains('show-popup') ? card : null;
    });

    wrapper.appendChild(card);
    wrapper.appendChild(btnRequest);
    cardsContainer.appendChild(wrapper);

    if(model.perfectMatch || model.rotatedMatch){
      setTimeout(()=>{
        card.classList.add('show');
        animateValue(document.getElementById(`cab${model.nome}`), 0, model.totalCab, 1200);
        animateValue(document.getElementById(`priceAgent${model.nome}`), 0, model.prezzoAgenteTotale, 1200);
        animateValue(document.getElementById(`priceClient${model.nome}`), 0, model.prezzoClienteTotale, 1200);
        animateValue(document.getElementById(`marginAgent${model.nome}`), 0, model.margineAgente, 1200);
        animateValue(document.getElementById(`marginClient${model.nome}`), 0, model.margineCliente, 1200);
      }, 50);
    }
  });

  // Gestione alert e layout
  if(rotatedMatches.length > 0){
    alertContainer.innerHTML = `<div class="alert">
      ‚ö†Ô∏è √à possibile ruotare alcuni cabinet rettangolari per ottenere questa misura, ma non √® consigliato.
    </div>`;
    aggiornaLayout(rotatedMatches, true);
  } else if(perfectMatches.length === 0){
    alertContainer.innerHTML = `<div class="alert">
      Per questa misura ti consigliamo un <strong>${bestMatch.nome}</strong> con misure realizzabili ${bestMatch.displayWidth} x ${bestMatch.displayHeight} cm.<br>
      Puoi richiedere un preventivo personalizzato cliccando <a href="https://wa.me/${whatsappNumber}?text=${encodeURIComponent(`Ti contatto dal calcolatore per un preventivo personalizzato con misura ${base} x ${altezza}${bifacciale ? " (Bifacciale)" : ""}.`)}" target="_blank">qui</a>.
    </div>`;
    aggiornaLayout([bestMatch], false);
  } else {
    aggiornaLayout(perfectMatches, false);
  }
}

baseInput.addEventListener('input', aggiornaCards);
altezzaInput.addEventListener('input', aggiornaCards);
bifaccialeInput.addEventListener('change', aggiornaCards);

// Effetto luce pulsante sui cabinet
setInterval(() => {
  const cells = document.querySelectorAll('#layoutContainer > div > div');
  cells.forEach((cell, i) => {
    const pulse = Math.sin(Date.now() / 400 + i) * 0.4 + 0.6;
    cell.style.filter = `brightness(${pulse})`;
  });
}, 80);

</script>
</body>
</html>
